
@{
    ViewBag.Title = "MyRestaurant";
}

@using yasemin.Models
@model RESTAURANT

<body>
    <div class="block">
        <div class="block-heading">
            <div class="main-text h2">
                My Restaurant
            </div>
            <div class="block-controls">
                <span aria-hidden="true" class="icon icon-cross icon-size-medium block-control-remove"></span>
                <span aria-hidden="true" class="icon icon-arrow-down icon-size-medium block-control-collapse"></span>
            </div>
        </div>
        <div class="block-content-outer">
            <div class="block-content-inner">
                <ul id="default-tabs-justified" class="nav nav-tabs nav-justified">
                    <li class="active"><a href="#profile" data-toggle="tab">Profile</a></li>
                    <li><a href="#concept" data-toggle="tab">Concepts</a></li>
                    <li><a href="#cities" data-toggle="tab">Cities</a></li>
                    <li><a href="#foods" data-toggle="tab">Menu</a></li>
                </ul>
                <div class="tab-content">
                    <div id="profile" class="tab-pane active">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="block">
                                    <div class="block-heading">
                                        <div class="main-text h2">
                                            Update Your Restaurant
                                        </div>

                                    </div>
                                    <div class="block-content-outer" style="display: block;">
                                        <div class="block-content-inner">
                                            <form action="/Restaurant/Add" method="post" role="form">

                                                <input type="hidden" name="RestaurantId" value="@Model.RestaurantId" />


                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">Restaurant Name</label>

                                                    <input value="@Model.RestaurantName" type="text" class="form-control" id="exampleInputEmail1" placeholder="Enter restaurant name" name="RestaurantName">

                                                </div>
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">Restaurant Mail Address</label>

                                                    <input value="@Model.RestaurantMail" type="text" class="form-control" id="exampleInputEmail1" placeholder="Enter restaurant e-mail" name="RestaurantMail">

                                                </div>
                                                <div class="form-group">
                                                    <label for="exampleInputPassword1">Restaurant Password</label>

                                                    <input value="@Model.RestaurantPassword" type="text" class="form-control" id="exampleInputPassword1" placeholder="Enter restaurant password" name="RestaurantPassword">


                                                </div>


                                                <button type="submit" class="btn btn-primary">Submit</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="concept" class="tab-pane">

                        <div class="block-content-outer">
                            <div class="block-content-inner">
                                <div class="table-responsive">
                                    <div id="datatable-1_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                        <div class="row">
                                            <form action="/Restaurant/ConceptAdd" method="post" role="form">
                                                <div class="form-group">
                                                    <div class="dataTables_length" id="datatable-1_length">
                                                        <label>
                                                            Concepts
                                                            <select name="ConceptId" aria-controls="datatable-1" class="form-control input-sm">
                                                                <option value="0">All Concepts</option>
                                                                @foreach (CONCEPT item in ViewBag.concepts)
                                                                {
                                                                    <option value="@item.ConceptId">@item.ConceptName</option>
                                                                }
                                                            </select>
                                                        </label>
                                                        <label>
                                                            Or you can write a concept name
                                                            <input type="text" class="form-control input-sm" placeholder="Concept Name" aria-controls="datatable-1" name="searchText">
                                                        </label>
                                                    </div>

                                                </div>
                                                <div class="form-group">
                                                    <div id="datatable-1_filter" class="dataTables_filter">
                                                        <input type="hidden" name="RestaurantId" value="@Model.RestaurantId" />
                                                        <button type="submit" class="btn btn-warning rounded">Add Concept</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>

                                        <div class="row">
                                            <div class="col-xs-12">
                                                <table id="datatable-1" class="table table-striped table-hover dataTable no-footer" role="grid" aria-describedby="datatable-1_info">
                                                    <thead>
                                                        <tr>
                                                            <th>Concept Name</th>
                                                            <th>Delete</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (CONCEPT_RESTAURANT item in Model.CONCEPT_RESTAURANT)
                                                        {

                                                            if (item.RestaurantId == Model.RestaurantId)
                                                            {
                                                                foreach (CONCEPT concept in ViewBag.concepts)
                                                                {
                                                                    <tr>
                                                                        @if (concept.ConceptId == item.ConceptId)
                                                                        {
                                                                            <td>@concept.ConceptName</td>
                                                                            <td><a href="#" class="btn btn-danger cncDelete" data-cncid="@item.ConceptRestaurantId">Delete</a></td>
                                                                        }
                                                                    </tr>


                                                                }
                                                            }


                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="cities" class="tab-pane">
                        <div class="block-content-outer">
                            <div class="block-content-inner">
                                <div class="table-responsive">
                                    <div id="datatable-1_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                        <div class="row">
                                            <form action="/Restaurant/CityAdd" method="post" role="form">
                                                <div class="form-group">
                                                    <div class="dataTables_length" id="datatable-1_length">
                                                        <label>
                                                            Cities
                                                            <select name="CityId" aria-controls="datatable-1" class="form-control input-sm">
                                                                <option value="0">All Cities</option>
                                                                @foreach (CITY item in ViewBag.cities)
                                                                {
                                                                    <option value="@item.CityId">@item.CityName</option>
                                                                }
                                                            </select>
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div id="datatable-1_filter" class="dataTables_filter">
                                                        <input type="hidden" name="RestaurantId" value="@Model.RestaurantId" />
                                                        <button type="submit" class="btn btn-warning rounded">Add City</button>
                                                    </div>
                                                </div>
                                            </form>

                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <table id="datatable-1" class="table table-striped table-hover dataTable no-footer" role="grid" aria-describedby="datatable-1_info">
                                                    <thead>
                                                        <tr>
                                                            <th>City Name</th>
                                                            <th>Delete</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>

                                                        @foreach (CITY_RESTAURANT item in Model.CITY_RESTAURANT)
                                                        {

                                                            if (item.RestaurantId == Model.RestaurantId)
                                                            {
                                                                foreach (CITY city in ViewBag.cities)
                                                                {
                                                                    <tr>
                                                                        @if (city.CityId == item.CityId)
                                                                        {
                                                                            <td>@city.CityName</td>
                                                                            <td><a href="#" class="btn btn-danger ctyDelete" data-ctyid="@item.CityRestaurantId">Delete</a></td>
                                                                        }
                                                                    </tr>


                                                                }
                                                            }


                                                        }



                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="foods" class="tab-pane">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="block">
                                    <div class="block-heading">
                                        <div class="main-text h2">
                                            Menu
                                        </div>
                                        <div class="block-controls">
                                            <input type="hidden" name="RestaurantId" value="@Model.RestaurantId" />
                                            <a class="btn btn-warning rounded" href="/Restaurant/FoodAdd/@Model.RestaurantId"> Add Food </a>
                                        </div>
                                    </div>
                                    <div class="block-content-outer">
                                        <div class="block-content-inner">
                                            <div class="table-responsive">
                                                <div id="datatable-1_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            <table id="datatable-1" class="table table-striped table-hover dataTable no-footer" role="grid" aria-describedby="datatable-1_info">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Food Name</th>
                                                                        <th>Category</th>
                                                                        <th>Description</th>
                                                                        <th>Price</th>
                                                                        <th>Update</th>
                                                                        <th>Delete</th>
                                                                    </tr>

                                                                </thead>
                                                                <tbody>

                                                                    @foreach (FOOD item in Model.FOOD)
                                                                    {
                                                                        <tr>
                                                                            <td>
                                                                                @item.FoodName
                                                                            </td>

                                                                            @foreach (CATEGORY category in ViewBag.categories)
                                                                            {
                                                                                if (category.CategoryId == item.CategoryId)
                                                                                {
                                                                                    <td>
                                                                                        @category.CategoryName
                                                                                    </td>

                                                                                }
                                                                            }

                                                                            <td>
                                                                                @item.FoodDescription
                                                                            </td>
                                                                            <td>
                                                                                @item.FoodPrice
                                                                            </td>
                                                                            <td>
                                                                                <form action="/Restaurant/FoodUpdate/@item.FoodId" method="post" role="form">
                                                                                    <input type="hidden" name="RestaurantId" value="@Model.RestaurantId" />
                                                                                    <button type="submit" class="btn btn-danger rounded">Update</button>
                                                                                </form>
                                                                            </td>
                                                                            <td>
                                                                                <input type="hidden" name="RestaurantId" value="@Model.RestaurantId" />
                                                                                <a href="#" class="btn btn-danger foodDelete" data-foodid="@item.FoodId">Delete</a>
                                                                            </td>

                                                                        </tr>


                                                                    }

                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>


@section scripts{

    <script src="~/Content/assets/js/required/jquery-1.11.1.min.js"></script>

    <script>
        $(".ctyDelete").click(function () {
            var s = confirm("Are you sure you want to delete the record?");
            if (s) {
                var cid = $(this).data("ctyid");
                //alert("ID=" + cid);
                $.ajax(
                    {
                        type: "POST",
                        url: "/Restaurant/CityDelete/" + cid,
                        success: function () {
                            alert("The record has been deleted.");
                            window.location.replace("/Restaurant/MyRestaurant");
                        },
                        error: function () {
                            alert("Something went wrong!");
                        }
                    });
            }
            else {
                alert("Cancel");
            }

        });


    </script>

    <script>
        $(".cncDelete").click(function () {
            var s = confirm("Are you sure you want to delete the record?");
            if (s) {
                var cid = $(this).data("cncid");
                //alert("ID=" + id);
                $.ajax(
                    {
                        type: "POST",
                        url: "/Restaurant/ConceptDelete/" + cid,
                        success: function () {
                            alert("The record has been deleted.");
                            window.location.replace("/Restaurant/MyRestaurant");
                        },
                        error: function () {
                            alert("Something went wrong!");
                        }
                    });
            }
            else {
                alert("Cancel");
            }

        });


    </script>

    <script>
        $(".foodDelete").click(function () {
            var s = confirm("Are you sure you want to delete the record?");
            if (s) {
                var fid = $(this).data("foodid");
                //alert("ID=" + id);
                $.ajax(
                    {
                        type: "POST",
                        url: "/Restaurant/FoodDelete/" + fid,
                        success: function () {
                            alert("The record has been deleted.");
                            window.location.replace("/Restaurant/MyRestaurant");
                        },
                        error: function () {
                            alert("Something went wrong!");
                        }
                    });
            }
            else {
                alert("Cancel");
            }

        });


    </script>
}

